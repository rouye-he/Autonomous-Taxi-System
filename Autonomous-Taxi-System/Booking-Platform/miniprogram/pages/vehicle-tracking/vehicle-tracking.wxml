<!--è½¦è¾†ä½ç½®è¿½è¸ªé¡µé¢-->
<view class="container">
  <!-- åœ°å›¾å®¹å™¨ -->
  <view class="map-container">
    <map 
      id="vehicleMap"
      class="map"
      longitude="{{mapCenter.longitude}}"
      latitude="{{mapCenter.latitude}}"
      scale="{{mapScale}}"
      markers="{{markers}}"
      show-location="{{true}}"
      enable-zoom="{{true}}"
      enable-scroll="{{true}}"
    />
    
    <!-- åœ°å›¾æ§åˆ¶æŒ‰é’® -->
    <view class="map-controls">
      <view class="control-btn" bindtap="refreshLocation">
        <text>ğŸ”„</text>
      </view>
    </view>
  </view>

  <!-- è½¦è¾†ä¿¡æ¯å¡ç‰‡ -->
  <view class="vehicle-info-card" wx:if="{{vehicleData}}">
    <view class="card-header">
      <view class="vehicle-title">
        <text class="plate-number">{{vehicleData.plateNumber}}</text>
        <text class="vehicle-model">{{vehicleData.model}}</text>
      </view>
      <view class="status-badge">
        {{vehicleData.currentStatus}}
      </view>
    </view>
    
    <view class="card-content">
      <view class="info-row">
        <view class="info-item">
          <text class="label">ç”µé‡</text>
          <text class="value">{{vehicleData.batteryLevel}}%</text>
        </view>
        <view class="info-item">
          <text class="label">è¯„åˆ†</text>
          <text class="value">{{vehicleData.rating === -1 ? 'å°šæ— è¯„ä»·' : vehicleData.rating + 'â­'}}</text>
        </view>
      </view>
      
      <view class="location-info">
        <text class="location-label">å½“å‰ä½ç½®</text>
        <text class="location-text">{{vehicleData.location.locationName || 'ä½ç½®æ›´æ–°ä¸­...'}}</text>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-container" wx:if="{{isLoading}}">
    <text class="loading-text">æ­£åœ¨è·å–è½¦è¾†ä½ç½®...</text>
  </view>

  <!-- é”™è¯¯æç¤º -->
  <view class="error-container" wx:if="{{errorMessage}}">
    <text class="error-text">{{errorMessage}}</text>
    <button class="retry-btn" bindtap="retryLoad">é‡è¯•</button>
  </view>

  <!-- æ— æ•°æ®æç¤º -->
  <view class="empty-container" wx:if="{{!isLoading && !vehicleData && !errorMessage}}">
    <text class="empty-text">æš‚æ— è¿›è¡Œä¸­çš„è®¢å•</text>
    <button class="go-home-btn" bindtap="goHome">è¿”å›é¦–é¡µ</button>
  </view>
</view> 